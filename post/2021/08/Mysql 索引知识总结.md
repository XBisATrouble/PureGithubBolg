## Mysql 索引知识总结
### 索引是什么
索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针，因此，索引需要一种数据结构承载。

* B+ 树是一种多路平衡查询树，所以他的节点是天然有序的(左子节点小于父节点、父节点小于右子节点)，所以对于范围查询的时候不需要做全表扫描。

* Hash 索引底层是哈希表，哈希表是一种以 key-value 存储数据的结构，所以多个数据在存储关系上是完全没有任何顺序关系的。

Q：B+ 树索引和 Hash 索引的优劣

A：Hash 索引结构的特殊性，其检索效率非常高，索引的检索可以一次定位；B+ 树索引需要从根节点到枝节点，最后才能访问到页节点这样多次的IO访间；但 Hash 索引是无序的，B+ 索引叶子节点连着一条双向链表，可以快速定位某个区间；此外，Hash 索引不支持多列联合索引；最后 Hash 索引受填充因子及哈希算法影响，没有 B+ 树稳定。

- Tips:
    - B+ 树索引并不能找到一个给定键值的具体行，只能找到数据行所在的页，然后把数据库读入内存，在内存中进行查找。
    - InnoDB 会把存储的数据划分为若干个「页」，以页作为磁盘和内存交互的基本单位，一个页的默认大小为 16KB

### B+ 树索引
Mysql 的 InnoDB 引擎使用的是 B+ 树索引，也就是我们传统意义上的索引，它具有如下优点[1]：

1. 在 B+ 树中，所有数据记录节点都是按照键值的大小存放在同一层的叶子节点上，而非叶子结点只存储key的信息，这样可以大大减少每个节点的存储的key的数量，降低B+ 树的高度
2. B+ 树叶子节点的关键字从小到大有序排列，左边结尾数据都会保存右边节点开始数据的指针。
3. B+ 树的层级更少：相较于 B 树 B+ 每个非叶子节点存储的关键字数更多，树的层级更少所以查询数据更快
4. B+ 树查询速度更稳定：B+ 所有关键字数据地址都存在叶子节点上，所以每次查找的次数都相同所以查询速度要比B树更稳定;
5. B+ 树天然具备排序功能：B+ 树所有的叶子节点数据构成了一个有序链表，在查询大小区间的数据时候更方便，数据紧密性很高，缓存的命中率也会比B树高。
6. B+ 树全节点遍历更快：B+ 树遍历整棵树只需要遍历所有的叶子节点即可，，而不需要像 B 树一样需要对每一层进行遍历，这有利于数据库做全表扫描。



### 参考资料
[1]. [MySQL索引原理，一篇从头到尾讲清楚](https://juejin.cn/post/6931901822231642125)